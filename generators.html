<html><head><title>Test Charged: Generators</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="fulrich" /><meta name="description" content="Supercharge your testing" /><meta name="og:image" content="/test-charged/img/poster.png" /><meta name="og:title" content="Test Charged: Generators" /><meta name="og:site_name" content="Test Charged" /><meta name="og:url" content="https://fulrich.github.io/test-charged/" /><meta name="og:type" content="website" /><meta name="og:description" content="Supercharge your testing" /><link rel="icon" type="image/png" href="/test-charged/img/favicon.png" /><meta name="twitter:title" content="Test Charged: Generators" /><meta name="twitter:image" content="https://fulrich.github.io/test-charged/img/poster.png" /><meta name="twitter:description" content="Supercharge your testing" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/test-charged/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/test-charged/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/test-charged/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/test-charged/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/test-charged/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/test-charged/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/test-charged/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/test-charged/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/test-charged/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/test-charged/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/test-charged/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/test-charged/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/test-charged/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/test-charged/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/test-charged/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/test-charged/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/test-charged/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/test-charged/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/test-charged/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/test-charged/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/test-charged/highlight/styles/darcula.css" /><link rel="stylesheet" href="/test-charged/css/style.css" /><link rel="stylesheet" href="/test-charged/css/palette.css" /><link rel="stylesheet" href="/test-charged/css/codemirror.css" /></head><body><header id="site-header"><div class="navbar-wrapper"><div class="container"><div class="row"><div class="col-xs-6"><a href="/test-charged/" class="brand"><div class="icon-wrapper"><span>Test Charged</span></div></a></div><div class="col-xs-6"><nav class="text-right"><ul class=""><li><a href="https://github.com/fulrich/test-charged"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="/test-charged/docs"><i class="fa fa-file-text"></i><span class="hidden-xs">Documentation</span></a></li></ul></nav></div></div></div></div><div class="jumbotron"><div class="container"><h1 class="text-center">Supercharge your testing</h1><h2></h2><p class="text-center"><a href="https://github.com/fulrich/test-charged" class="btn btn-outline-inverse">View on GitHub</a></p></div></div><div><ul class="horizontalNav">               <li><a class="" href="/test-charged/">Home</a></li>  <li><a class=" active " href="/test-charged/generators.html">Generators</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><h2 id="generators">Generators</h2>
<p>One of the main features of TestCharged is Generators.</p>

<p>Generators are a way for you to create test data without relying on fixtures.
In large applications fixtures often start to become a crux where multiple tests are relying on the same fixtures due to test data being complex and difficult to create.
This leads to tests being brittle and difficult to change.<br />
The fixtures themselves become almost impossible to change without effecting multiple tests which leads to us making an increasing number of fixtures to the point nobody can track them anymore.</p>

<p>The major advantage of switching to Generators is we no longer need to track all our fixtures.
An even larger benefit that came from this for us was it forced us to test <strong>behaviour</strong> instead of <strong>data</strong>.
This lead to much better tests that actually testing what we needed</p>

<h3 id="example">Example</h3>
<p>Take the below test as an example</p>
<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserPersistenceTest</span> <span class="k">extends</span> <span class="nc">FunSuite</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">userRepository</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">()</span>
  <span class="k">val</span> <span class="n">testUser</span> <span class="k">=</span> <span class="nc">User</span><span class="o">(</span>
    <span class="n">id</span> <span class="k">=</span> <span class="nc">None</span><span class="o">,</span>
    <span class="n">name</span> <span class="k">=</span> <span class="s">"Han Solo"</span><span class="o">,</span>
    <span class="n">organization</span> <span class="k">=</span> <span class="s">"Alliance"</span><span class="o">,</span>
    <span class="n">role</span> <span class="k">=</span> <span class="s">"Smuggler"</span>
  <span class="o">)</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"A user can be created in the database"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">storedUser</span> <span class="k">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="n">save</span><span class="o">(</span><span class="n">testUser</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">fetchedUser</span> <span class="k">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="n">getById</span><span class="o">(</span><span class="n">storedUser</span><span class="o">.</span><span class="n">id</span><span class="o">)</span>
    
    <span class="n">fetchedUser</span> <span class="n">shouldBe</span> <span class="n">storedUser</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>If the User structure ever changes every test that follows a similar pattern will need to be updated.
If there was a fixture instead each fixture would need to be updated.
If you instead use a generator you simply update the generator and your tests are updated everywhere:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserPersistenceTest</span> <span class="k">extends</span> <span class="nc">FunSuite</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">userRepository</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">()</span>

  <span class="n">test</span><span class="o">(</span><span class="s">"A user can be created in the database"</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">testUser</span> <span class="k">=</span> <span class="nc">UserGenerator</span><span class="o">.</span><span class="n">value</span>
  
    <span class="k">val</span> <span class="n">storedUser</span> <span class="k">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="n">save</span><span class="o">(</span><span class="n">testUser</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">fetchedUser</span> <span class="k">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="n">getById</span><span class="o">(</span><span class="n">storedUser</span><span class="o">.</span><span class="n">id</span><span class="o">)</span>
    
    <span class="n">fetchedUser</span> <span class="n">shouldBe</span> <span class="n">storedUser</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>
</div></div></section><section class="technologies"><div class="container"><div class="row"></div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>Test Charged is designed and developed by <a href="" target="_blank">fulrich</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/fulrich/test-charged"><span class="fa fa-github"></span>View on GitHub</a></p></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/test-charged/highlight/highlight.pack.js"></script><script>hljs.configure({languages:['scala','java','bash']});
hljs.initHighlighting();
              </script></body></html>